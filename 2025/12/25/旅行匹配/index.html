<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>旅行匹配 | 超级大馒头</title>
  <meta name="description" content="A amazing blog." />
  <meta name="keywords" content="hexo,theme,mantou,plus" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content=":root {       --primary: #4f7cff;       --primary-light: #6366f1;       --bg: #f8fafc;       --card: #ffffff;       --text: #1f2937;       --text-secondary: #6b7280;       --border: #e2e8f0;">
<meta property="og:type" content="article">
<meta property="og:title" content="旅行匹配">
<meta property="og:url" content="http://example.com/2025/12/25/%E6%97%85%E8%A1%8C%E5%8C%B9%E9%85%8D/index.html">
<meta property="og:site_name" content="超级大馒头">
<meta property="og:description" content=":root {       --primary: #4f7cff;       --primary-light: #6366f1;       --bg: #f8fafc;       --card: #ffffff;       --text: #1f2937;       --text-secondary: #6b7280;       --border: #e2e8f0;">
<meta property="og:locale">
<meta property="article:published_time" content="2025-12-24T16:00:00.000Z">
<meta property="article:modified_time" content="2025-12-25T06:54:35.956Z">
<meta property="article:author" content="weixiaojie">
<meta name="twitter:card" content="summary">
  
  
    <link rel="icon" href="/image/favicon.ico">
  

  <link rel='stylesheet' href='/css/nprogress.css'/>
  <link rel="stylesheet" href="/css/github-gist.min.css">
  <link rel="stylesheet" href="/css/font_405585_yuudmyqpo3q.css">
  <script src='/js/nprogress.min.js'></script>
  <!-- <script>try{Typekit.load({ async: false });}catch(e){}</script> -->
  
<link rel="stylesheet" href="/style.css">

  

  


<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  
  <script>NProgress.start();</script>
  
  <div id="site-wrapper">
    
    <header class="header">
  <div class="header-wrapper">
    <a href="/">
      <img src="/image/logo.jpg" class="logo"/>
      <!-- <span class="site-desc">
        
      </span> -->
    </a>
    <div class="social-wrapper">
      
        
          <a href="https://github.com/weixiaojie" class="social github" target="_blank" rel="external">
            <span class="iconfont icon-github"></span>
          </a>
          
          <a href="https://weibo.com/u/2156965395" class="social weibo" target="_blank" rel="external">
            <span class="iconfont icon-weibo"></span>
          </a>
          
          <a href="mailto:18565765503@163.com" class="social email" target="_blank" rel="external">
            <span class="iconfont icon-email"></span>
          </a>
          
      
      
      <a href="#" class="social search-do" target="_blank" rel="external">
        <span class="iconfont icon-search"></span>
      </a>
            
      <!-- <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://example.com"></form> -->
    </div>
    <div class="search-wrap">
      <div class="search-content animated fade-in">
        <p class="search-input">
          <span class="iconfont icon-search"></span>
          <input tabindex="1">
        </p>
        <ul class="search-result">
            
        </ul>
      </div>
    </div>
    <nav class="header-nav">
      
        <a href="/" class="archives">
          首页
        </a>
        
        <a href="/archives" class="archives">
          归档
        </a>
        
    </nav>
  </div>
</header>
    <script>NProgress.set(0.4);</script>
    
    <main id="main" role="main">
      <article id="post-旅行匹配"
  class="post article white-box article-type-post animated fade-in-top"
  itemscope itemprop="blogPost">
  <section class="post-header article-header">
    <h2 class="title">
        <a href="/2025/12/25/%E6%97%85%E8%A1%8C%E5%8C%B9%E9%85%8D/">
          旅行匹配
        </a>
      </h2>
      <div class="subtitle">
          <time>
            2025年12月25日
          </time>
          
      </div>
  </section>
  <section class="content">
    <div class="article-entry" itemprop="articleBody">
      <style>
    :root {
      --primary: #4f7cff;
      --primary-light: #6366f1;
      --bg: #f8fafc;
      --card: #ffffff;
      --text: #1f2937;
      --text-secondary: #6b7280;
      --border: #e2e8f0;
      --success: #22c55e;
      --danger: #ef4444;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --radius: 16px;
      --radius-sm: 12px;
      --share: #3b82f6;        /* 蓝色系 - 分享按钮 */
      --copy: #10b981;         /* 绿色系 - 复制按钮 */
      --edit: #8b5cf6;         /* 紫色系 - 编辑按钮 */
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      margin: 0;
      background: var(--bg);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC",
        "Hiragino Sans GB", "Helvetica Neue", Arial, sans-serif;
      color: var(--text);
      line-height: 1.5;
      padding: 16px;
      padding-top: 0;
    }

    h1 {
      text-align: center;
      font-size: 22px;
      margin: 20px 0 16px;
      font-weight: 600;
      color: var(--text);
    }

    h2 {
      font-size: 20px;
      margin-bottom: 16px;
      text-align: center;
      font-weight: 600;
      color: var(--text);
    }

    #app {
      max-width: 520px;
      margin: 0 auto;
      padding: 0 16px;
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 16px;
      box-shadow: var(--shadow);
      position: relative;
    }

    .btn {
      width: 100%;
      height: 48px;
      border-radius: var(--radius-sm);
      border: none;
      background: var(--primary);
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      margin: 24px 0 0;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(79, 124, 255, 0.3);
    }

    .btn:hover {
      background: var(--primary-light);
      transform: translateY(-1px);
    }

    .btn.secondary {
      background: #f1f5f9;
      color: var(--text);
      box-shadow: none;
    }

    .btn.secondary:hover {
      background: #e2e8f0;
    }

    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 20px;
    }
    
    .action-btn {
      height: 44px;
      border-radius: var(--radius-sm);
      border: none;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: var(--shadow);
    }
    
    .btn-share {
      background: var(--share);
      color: white;
    }
    
    .btn-share:hover {
      background: #2563eb;
      transform: translateY(-1px);
    }
    
    .btn-copy {
      background: var(--copy);
      color: white;
    }
    
    .btn-copy:hover {
      background: #059669;
      transform: translateY(-1px);
    }
    
    .btn-edit {
      background: var(--edit);
      color: white;
    }
    
    .btn-edit:hover {
      background: #7c3aed;
      transform: translateY(-1px);
    }

    .question {
      margin-bottom: 20px;
    }

    .question label {
      display: block;
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text);
    }

    select,
    input[type="text"] {
      width: 100%;
      height: 48px;
      padding: 0 16px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      font-size: 15px;
      background: #f8fafc;
      transition: border-color 0.3s;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 1rem center;
      background-size: 1em;
    }

    select:focus,
    input[type="text"]:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(79, 124, 255, 0.2);
    }

    input[type="checkbox"] {
      width: 22px;
      height: 22px;
      margin-right: 12px;
      accent-color: var(--primary);
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .checkbox-group:last-child {
      border-bottom: none;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
      margin-top: 12px;
      border-radius: var(--radius-sm);
      overflow: hidden;
    }

    th {
      background: #f1f5f9;
      font-weight: 600;
      padding: 12px;
    }

    th,
    td {
      border: 1px solid var(--border);
      padding: 10px;
      text-align: center;
    }

    .ok {
      color: var(--success);
      font-weight: bold;
    }

    .no {
      color: var(--danger);
      font-weight: bold;
    }

    .score {
      font-size: 36px;
      font-weight: 700;
      color: var(--primary);
      text-align: center;
      margin: 16px 0;
    }

    .hint {
      font-size: 13px;
      color: var(--text-secondary);
      text-align: center;
      margin-top: 16px;
    }

    .result-container {
      text-align: center;
    }

    .share-section {
      margin-top: 24px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
    }

    .copy-btn {
      background: #f1f5f9;
      border: none;
      padding: 10px 16px;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 14px;
      color: var(--text);
      margin-top: 12px;
      transition: background 0.3s;
    }

    .copy-btn:hover {
      background: #e2e8f0;
    }

    .notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .notification.show {
      opacity: 1;
    }

    @media (max-width: 500px) {
      body {
        padding: 12px;
        padding-top: 0;
      }

      .card {
        padding: 20px;
      }

      h1 {
        font-size: 20px;
      }

      h2 {
        font-size: 18px;
      }

      #app {
        padding: 0 8px;
      }
    }
</style>


<div id="app"></div>
<div id="notification" class="notification">链接已复制到剪贴板</div>

<script>

const app = document.getElementById('app');
const notification = document.getElementById('notification');
const url = new URL(location.href);
const ownerParam = url.searchParams.get('owner');

/* ======================
   题库（根据你给的图片整理）
====================== */
const questions = [
  { id: 'name', label: '你的名字', type: 'text', match: false },

  { id: 'out_time', label: '习惯的出门时间', type: 'single',
    options: ['5点前','5-6点','6-7点','7-8点','8-9点','9-10点','10-11点','11点后','无所谓'] },

  { id: 'sleep_time', label: '习惯的睡觉时间', type: 'single',
    options: ['21点前','21-22点','22-23点','23-24点','0-1点','1-2点','2-3点','3点后','无所谓'] },

  { id: 'photo_time', label: '习惯的拍照时长', type: 'single',
    options: ['随手拍','1-2分钟','3-5分钟','6-9分钟','10-14分钟','15-19分钟','20-29分钟','30分钟以上','无所谓'] },

  { id: 'hotel', label: '住宿条件要求', type: 'single',
    options: ['青年旅舍','小旅馆','如家/7天','汉庭/海友','三星','四星','五星','豪华型','无所谓'] },

  { id: 'energy', label: '体能情况', type: 'single',
    options: ['避免运动','<10000步','<15000步','<20000步','<25000步','<30000步','准专业','运动员级','无所谓'] },

  { id: 'food', label: '尽可能多吃本地特色', type: 'single',
    options: ['是','否','无所谓'] },
  { id: 'shopping', label: '需要逛商业街/商场', type: 'single',
    options: ['是','否','无所谓'] },
  { id: 'museum', label: '喜欢展馆类景点', type: 'single',
    options: ['是','否','无所谓'] },
  { id: 'nature', label: '喜欢山川自然景点', type: 'single',
    options: ['是','否','无所谓'] },
  { id: 'ancient', label: '喜欢古镇类景点', type: 'single',
    options: ['是','否','无所谓'] },
  { id: 'park', label: '喜欢乐园/娱乐项目', type: 'single',
    options: ['是','否','无所谓'] },
  { id: 'schedule_free', label: '可以不安排具体行程', type: 'single',
    options: ['是','否','无所谓'] },
  { id: 'hate_empty', label: '拒绝行程轮空', type: 'single',
    options: ['是','否','无所谓'] },
  { id: 'cold', label: '怕冷', type: 'single',
    options: ['是','否','无所谓'] },
  { id: 'hot', label: '怕热', type: 'single',
    options: ['是','否','无所谓'] }
];

/* ======================
   工具函数
====================== */
function encode(data) {
  return btoa(encodeURIComponent(JSON.stringify(data)));
}
function decode(str) {
  return JSON.parse(decodeURIComponent(atob(str)));
}

/* ======================
   渲染表单
====================== */
function renderForm(onSubmit, preset = {}) {
  let html = `<div class="card">`;
  questions.forEach(q => {
    html += `<div class="question"><label>${q.label}</label>`;
    if (q.type === 'single') {
      html += `<select id="${q.id}">`;
      q.options.forEach((opt, i) => {
        const sel = preset[q.id] == i ? 'selected' : '';
        html += `<option value="${i}" ${sel}>${opt}</option>`;
      });
      html += `</select>`;
    }
    if (q.type === 'text') {
      html += `<input type="text" id="${q.id}" value="${preset[q.id] || ''}" placeholder="请输入${q.label}" />`;
    }
    html += `</div>`;
  });
  html += `<button class="btn" id="submit">提交</button></div>`;
  app.innerHTML = html;

  document.getElementById('submit').onclick = () => {
    const data = {};
    questions.forEach(q => {
      if (q.type === 'single') data[q.id] = Number(document.getElementById(q.id).value);
      if (q.type === 'text') data[q.id] = document.getElementById(q.id).value || '匿名';
    });
    onSubmit(data);
  };
}

/* ======================
   匹配计算
====================== */
function calcMatch(a, b) {
  let total = 0, same = 0;
  questions.forEach(q => {
    if (q.match === false) return;
    total++;
    // 如果其中一个选项是"无所谓"，则认为匹配
    const lastOptionIndex = q.options.length - 1;
    if (a[q.id] === lastOptionIndex || b[q.id] === lastOptionIndex) {
      same++;
    } else if (a[q.id] === b[q.id]) {
      same++;
    }
  });
  return Math.round((same / total) * 100);
}

/* ======================
   结果页
====================== */
function renderResult(owner, other) {
  const score = calcMatch(owner, other);
  let html = `<div class="card result-container"><h2>与你的匹配度 ${score}%</h2><table>
    <tr><th>项目</th><th>${owner.name}</th><th>${other.name}</th><th></th></tr>`;

  questions.forEach(q => {
    if (q.type === 'text') return;
    const a = owner[q.id];
    const b = other[q.id];
    let av = q.type === 'single' ? q.options[a] : (a ? '是' : '否');
    let bv = q.type === 'single' ? q.options[b] : (b ? '是' : '否');
    
    // 匹配逻辑：如果其中一个选择是"无所谓"或选项相同，则匹配
    const lastOptionIndex = q.options.length - 1;
    const ok = (a === lastOptionIndex || b === lastOptionIndex || a === b);
    html += `<tr>
      <td>${q.label}</td>
      <td>${av}</td>
      <td>${bv}</td>
      <td class="${ok ? 'ok' : 'no'}">${ok ? '✔' : '✘'}</td>
    </tr>`;
  });

  html += `</table></div>`;
  app.innerHTML = html;
}

/* ======================
   主流程
====================== */
const myPref = localStorage.getItem('myPreference');

if (!ownerParam && !myPref) {
  app.innerHTML = `
    <div class="card">
      <p>你还没有创建旅行喜好</p>
      <button class="btn" id="create">创建我的旅行喜好</button>
    </div>`;
  document.getElementById('create').onclick = () =>
    renderForm(data => {
      localStorage.setItem('myPreference', JSON.stringify(data));
      location.reload();
    });
}

if (!ownerParam && myPref) {
  const encoded = encode(JSON.parse(myPref));
  const shareLink = `${location.origin}${location.pathname}?owner=${encoded}`;
  app.innerHTML = `
    <div class="card">
      <p align="center">你的旅行喜好已创建</p>
      <div class="share-section">
        <div class="action-buttons">
          <button class="action-btn btn-share" id="shareBtn"> 分享好友 </button>
          <button class="action-btn btn-copy" id="copyBtn">复制链接</button>
          <button class="action-btn btn-edit" id="edit">修改喜好</button>
        </div>
      </div>
    </div>`;
    
  document.getElementById('edit').onclick = () =>
    renderForm(data => {
      localStorage.setItem('myPreference', JSON.stringify(data));
      location.reload();
    }, JSON.parse(myPref));
    
  document.getElementById('shareBtn').onclick = () => {
    if (navigator.share) {
      navigator.share({
        title: '旅行搭子匹配',
        text: '快来测试一下我们是否适合一起旅行吧！',
        url: shareLink
      }).catch(console.error);
    } else {
      copyToClipboard(shareLink);
    }
  };
  
  document.getElementById('copyBtn').onclick = () => {
    copyToClipboard(shareLink);
  };
}

if (ownerParam) {
  const owner = decode(ownerParam);
  renderForm(other => renderResult(owner, other));
}

function copyToClipboard(text) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(text).then(() => {
      showNotification('链接已复制到剪贴板');
    }).catch(err => {
      console.error('复制失败', err);
    });
  } else {
    // 降级处理
    const textArea = document.createElement('textarea');
    textArea.value = text;
    document.body.appendChild(textArea);
    textArea.select();
    const successful = document.execCommand('copy');
    document.body.removeChild(textArea);
    if (successful) {
      showNotification('链接已复制到剪贴板');
    } else {
      console.error('复制失败');
    }
  }
}

function showNotification(message) {
  notification.textContent = message;
  notification.classList.add('show');
  setTimeout(() => {
    notification.classList.remove('show');
  }, 2000);
}
</script>





    </div>
  </section>

  
  
</article>
      <script>NProgress.set(0.6);</script>
    </main>
    
    <!-- <footer class="footer">
  <div class="footer-wrap">
    <div class="footer-link">
      
      <h3>LINKS</h3>
      <p>
        
          <a href="http://1x0.xyz/" target="_blank">Tian1x0</a>
        
          <a href="http://www.royalmice.com/hankzhou/" target="_blank">Hankzhou</a>
        
          <a href="http://sjydh.me/" target="_blank">设计有点货</a>
        
          <a href="https://developers.google.com/web/fundamentals/" target="_blank">Web fundamentals</a>
        
      </p>
      
    </div>
    <div class="footer-tags">
      
    </div>
    <div class="footer-info">
        <div>Theme <span class="codename"><a href="https://github.com/GGICE/hexo-icer" target="_blank">icer</a></span> designed & coded by <a href="https://ice.gs/" target="_blank">GGICE</a></div>
        <div>Copyright &copy; 2026, <a href="/">超级大馒头</a>  . All rights reserved .</div>
      </div>
  </div>
</footer>
 -->

    <script>NProgress.set(0.8);</script>
    
  </div>

  <script src="/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="/js/main.js"></script>


<!-- Commit -->



  <script>
    NProgress.done();
  </script>
  
</body>
</html>
